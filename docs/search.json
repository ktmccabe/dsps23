[
  {
    "objectID": "11-TextasData.html#why-text",
    "href": "11-TextasData.html#why-text",
    "title": "11  Text as Data",
    "section": "11.1 Why text?",
    "text": "11.1 Why text?\nWords (can) matter. Patterns of word usage can be suggestive of deeper divides.\n\nArticle from Deadspin\n\nArticle from NY Times\nWhy Use R to analyze text?\n\nAssist in reading large amounts of text\n\n \n\nEfficiently summarize text through quantifying text attributes\n(Can) remove some subjectivity in coding text, allow to discover aspects of text unknown a priori"
  },
  {
    "objectID": "11-TextasData.html#r-packages-for-text",
    "href": "11-TextasData.html#r-packages-for-text",
    "title": "11  Text as Data",
    "section": "11.2 R Packages for text",
    "text": "11.2 R Packages for text\nPackages are like apps on your phone. They give you additional functionality. To use the tools in a package you first have to install it.\n\ninstall.packages(\"sotu\", dependencies = T)\ninstall.packages(\"tm\", dependencies = T)\ninstall.packages(\"SnowballC\", dependencies = T)\ninstall.packages(\"wordcloud\", dependencies = T)\ninstall.packages(\"stringr\", dependencies = T)\n\nAfter you install it, just like on a phone, anytime you want to use the app, you need to open it. In R, we do that with library().\n\nlibrary(sotu)\nlibrary(tm)\nlibrary(SnowballC)\nlibrary(wordcloud)\nlibrary(stringr)"
  },
  {
    "objectID": "11-TextasData.html#application-state-of-the-union",
    "href": "11-TextasData.html#application-state-of-the-union",
    "title": "11  Text as Data",
    "section": "11.3 Application: State of the Union",
    "text": "11.3 Application: State of the Union\nFor a video explainer of the code for the State of the Union application on pre-processing text and dictionary analysis, see below. (Via youtube, you can speed up the playback to 1.5 or 2x speed.)\n\nThe sotu package includes a dataset with the text of every U.S. State of the Union speech. It also includes second dataset with information about the speech. When datasets are stored in a package, you can add them to your environment through the data() function.\n\ndata(sotu_meta)\ndata(sotu_text)\n\nWe are going to “bind” these together into a new dataframe. That way, the sotu_text is a variable inside of our speeches dataframe.\n\nspeeches &lt;- cbind(sotu_meta, sotu_text)\nnames(speeches)\n\n[1] \"X\"            \"president\"    \"year\"         \"years_active\" \"party\"       \n[6] \"sotu_type\"    \"sotu_text\"   \n\n\n\n11.3.1 Cleaning Text\nNote that when working with raw text data, we usually do want our variables to be character variables and not factor variables. Here, every cell is not a category. Instead, it is a speech!\n\nclass(speeches$sotu_text)\n\n[1] \"character\"\n\n\nText is messy data. We may want to spruce it up a bit by removing some of the non-essential characters and words, and moving everything to lowercase.\n\n## Example of speech\nspeeches$sotu_text[1]\n\n[1] \"Fellow-Citizens of the Senate and House of Representatives: \\n\\nI embrace with great satisfaction the opportunity which now presents itself of congratulating you on the present favorable prospects of our public affairs. The recent accession of the important state of North Carolina to the Constitution of the United States (of which official information has been received), the rising credit and respectability of our country, the general and increasing good will toward the government of the Union, and the concord, peace, and plenty with which we are blessed are circumstances auspicious in an eminent degree to our national prosperity.\\n\\nIn resuming your consultations for the general good you can not but derive encouragement from the reflection that the measures of the last session have been as satisfactory to your constituents as the novelty and difficulty of the work allowed you to hope. Still further to realize their expectations and to secure the blessings which a gracious Providence has placed within our reach will in the course of the present important session call for the cool and deliberate exertion of your patriotism, firmness, and wisdom.\\n\\nAmong the many interesting objects which will engage your attention that of providing for the common defense will merit particular regard. To be prepared for war is one of the most effectual means of preserving peace.\\n\\nA free people ought not only to be armed, but disciplined; to which end a uniform and well-digested plan is requisite; and their safety and interest require that they should promote such manufactories as tend to render them independent of others for essential, particularly military, supplies.\\n\\nThe proper establishment of the troops which may be deemed indispensable will be entitled to mature consideration. In the arrangements which may be made respecting it it will be of importance to conciliate the comfortable support of the officers and soldiers with a due regard to economy.\\n\\nThere was reason to hope that the pacific measures adopted with regard to certain hostile tribes of Indians would have relieved the inhabitants of our southern and western frontiers from their depredations, but you will perceive from the information contained in the papers which I shall direct to be laid before you (comprehending a communication from the Commonwealth of Virginia) that we ought to be prepared to afford protection to those parts of the Union, and, if necessary, to punish aggressors.\\n\\nThe interests of the United States require that our intercourse with other nations should be facilitated by such provisions as will enable me to fulfill my duty in that respect in the manner which circumstances may render most conducive to the public good, and to this end that the compensation to be made to the persons who may be employed should, according to the nature of their appointments, be defined by law, and a competent fund designated for defraying the expenses incident to the conduct of foreign affairs.\\n\\nVarious considerations also render it expedient that the terms on which foreigners may be admitted to the rights of citizens should be speedily ascertained by a uniform rule of naturalization.\\n\\nUniformity in the currency, weights, and measures of the United States is an object of great importance, and will, I am persuaded, be duly attended to.\\n\\nThe advancement of agriculture, commerce, and manufactures by all proper means will not, I trust, need recommendation; but I can not forbear intimating to you the expediency of giving effectual encouragement as well to the introduction of new and useful inventions from abroad as to the exertions of skill and genius in producing them at home, and of facilitating the intercourse between the distant parts of our country by a due attention to the post-office and post-roads.\\n\\nNor am I less persuaded that you will agree with me in opinion that there is nothing which can better deserve your patronage than the promotion of science and literature. Knowledge is in every country the surest basis of public happiness. In one in which the measures of government receive their impressions so immediately from the sense of the community as in ours it is proportionably essential.\\n\\nTo the security of a free constitution it contributes in various ways - by convincing those who are intrusted with the public administration that every valuable end of government is best answered by the enlightened confidence of the people, and by teaching the people themselves to know and to value their own rights; to discern and provide against invasions of them; to distinguish between oppression and the necessary exercise of lawful authority; between burthens proceeding from a disregard to their convenience and those resulting from the inevitable exigencies of society; to discriminate the spirit of liberty from that of licentiousness - cherishing the first, avoiding the last - and uniting a speedy but temperate vigilance against encroachments, with an inviolable respect to the laws.\\n\\nWhether this desirable object will be best promoted by affording aids to seminaries of learning already established, by the institution of a national university, or by any other expedients will be well worthy of a place in the deliberations of the legislature.\\n\\nGentlemen of the House of Representatives: \\n\\nI saw with peculiar pleasure at the close of the last session the resolution entered into by you expressive of your opinion that an adequate provision for the support of the public credit is a matter of high importance to the national honor and prosperity. In this sentiment I entirely concur; and to a perfect confidence in your best endeavors to devise such a provision as will be truly with the end I add an equal reliance on the cheerful cooperation of the other branch of the legislature.\\n\\nIt would be superfluous to specify inducements to a measure in which the character and interests of the United States are so obviously so deeply concerned, and which has received so explicit a sanction from your declaration. \\n\\nGentlemen of the Senate and House of Representatives: \\n\\nI have directed the proper officers to lay before you, respectively, such papers and estimates as regard the affairs particularly recommended to your consideration, and necessary to convey to you that information of the state of the Union which it is my duty to afford.\\n\\nThe welfare of our country is the great object to which our cares and efforts ought to be directed, and I shall derive great satisfaction from a cooperation with you in the pleasing though arduous task of insuring to our fellow citizens the blessings which they have a right to expect from a free, efficient, and equal government. GEORGE WASHINGTON\\n\"\n\n\n\n## clean text\nspeeches$sotu_text &lt;- tolower(speeches$sotu_text)\nspeeches$sotu_text &lt;- stripWhitespace(speeches$sotu_text)\nspeeches$sotu_text &lt;- removeWords(speeches$sotu_text, stopwords(kind=\"en\"))\nspeeches$sotu_text &lt;- removePunctuation(speeches$sotu_text)\nspeeches$sotu_text &lt;- removeNumbers(speeches$sotu_text)\n#speeches$sotu_text &lt;- stemDocument(speeches$sotu_text) # we will hold off\n\nNote: What you might consider non-essential could differ depending on your application. Maybe you want to keep numbers in your text, for example.\n\n\n11.3.2 Preparing a Corpus\n\n## turn text into corpus\nsotu.corpus &lt;- VCorpus(VectorSource(speeches$sotu_text))\n\n## Add meta data into corpus\nmeta(sotu.corpus, tag= names(sotu_meta), type=\"indexed\") &lt;- sotu_meta\nmeta(sotu.corpus)\n\n      X             president year years_active                 party sotu_type\n1     1     George Washington 1790    1789-1793           Nonpartisan    speech\n2     2     George Washington 1790    1789-1793           Nonpartisan    speech\n3     3     George Washington 1791    1789-1793           Nonpartisan    speech\n4     4     George Washington 1792    1789-1793           Nonpartisan    speech\n5     5     George Washington 1793    1793-1797           Nonpartisan    speech\n6     6     George Washington 1794    1793-1797           Nonpartisan    speech\n7     7     George Washington 1795    1793-1797           Nonpartisan    speech\n8     8     George Washington 1796    1793-1797           Nonpartisan    speech\n9     9            John Adams 1797    1797-1801            Federalist    speech\n10   10            John Adams 1798    1797-1801            Federalist    speech\n11   11            John Adams 1799    1797-1801            Federalist    speech\n12   12            John Adams 1800    1797-1801            Federalist    speech\n13   13      Thomas Jefferson 1801    1801-1805 Democratic-Republican   written\n14   14      Thomas Jefferson 1802    1801-1805 Democratic-Republican   written\n15   15      Thomas Jefferson 1803    1801-1805 Democratic-Republican   written\n16   16      Thomas Jefferson 1804    1801-1805 Democratic-Republican   written\n17   17      Thomas Jefferson 1805    1805-1809 Democratic-Republican   written\n18   18      Thomas Jefferson 1806    1805-1809 Democratic-Republican   written\n19   19      Thomas Jefferson 1807    1805-1809 Democratic-Republican   written\n20   20      Thomas Jefferson 1808    1805-1809 Democratic-Republican   written\n21   21         James Madison 1809    1809-1813 Democratic-Republican   written\n22   22         James Madison 1810    1809-1813 Democratic-Republican   written\n23   23         James Madison 1811    1809-1813 Democratic-Republican   written\n24   24         James Madison 1812    1809-1813 Democratic-Republican   written\n25   25         James Madison 1813    1813-1817 Democratic-Republican   written\n26   26         James Madison 1814    1813-1817 Democratic-Republican   written\n27   27         James Madison 1815    1813-1817 Democratic-Republican   written\n28   28         James Madison 1816    1813-1817 Democratic-Republican   written\n29   29          James Monroe 1817    1817-1821 Democratic-Republican   written\n30   30          James Monroe 1818    1817-1821 Democratic-Republican   written\n31   31          James Monroe 1819    1817-1821 Democratic-Republican   written\n32   32          James Monroe 1820    1817-1821 Democratic-Republican   written\n33   33          James Monroe 1821    1821-1825 Democratic-Republican   written\n34   34          James Monroe 1822    1821-1825 Democratic-Republican   written\n35   35          James Monroe 1823    1821-1825 Democratic-Republican   written\n36   36          James Monroe 1824    1821-1825 Democratic-Republican   written\n37   37     John Quincy Adams 1825    1825-1829 Democratic-Republican   written\n38   38     John Quincy Adams 1826    1825-1829 Democratic-Republican   written\n39   39     John Quincy Adams 1827    1825-1829 Democratic-Republican   written\n40   40     John Quincy Adams 1828    1825-1829 Democratic-Republican   written\n41   41        Andrew Jackson 1829    1829-1833            Democratic   written\n42   42        Andrew Jackson 1830    1829-1833            Democratic   written\n43   43        Andrew Jackson 1831    1829-1833            Democratic   written\n44   44        Andrew Jackson 1832    1829-1833            Democratic   written\n45   45        Andrew Jackson 1833    1833-1837            Democratic   written\n46   46        Andrew Jackson 1834    1833-1837            Democratic   written\n47   47        Andrew Jackson 1835    1833-1837            Democratic   written\n48   48        Andrew Jackson 1836    1833-1837            Democratic   written\n49   49      Martin Van Buren 1837    1837-1841            Democratic   written\n50   50      Martin Van Buren 1838    1837-1841            Democratic   written\n51   51      Martin Van Buren 1839    1837-1841            Democratic   written\n52   52      Martin Van Buren 1840    1837-1841            Democratic   written\n53   53            John Tyler 1841    1841-1845                  Whig   written\n54   54            John Tyler 1842    1841-1845                  Whig   written\n55   55            John Tyler 1843    1841-1845                  Whig   written\n56   56            John Tyler 1844    1841-1845                  Whig   written\n57   57         James K. Polk 1845    1845-1849            Democratic   written\n58   58         James K. Polk 1846    1845-1849            Democratic   written\n59   59         James K. Polk 1847    1845-1849            Democratic   written\n60   60         James K. Polk 1848    1845-1849            Democratic   written\n61   61        Zachary Taylor 1849    1849-1850                  Whig   written\n62   62      Millard Fillmore 1850    1850-1853                  Whig   written\n63   63      Millard Fillmore 1851    1850-1853                  Whig   written\n64   64      Millard Fillmore 1852    1850-1853                  Whig   written\n65   65       Franklin Pierce 1853    1853-1857            Democratic   written\n66   66       Franklin Pierce 1854    1853-1857            Democratic   written\n67   67       Franklin Pierce 1855    1853-1857            Democratic   written\n68   68       Franklin Pierce 1856    1853-1857            Democratic   written\n69   69        James Buchanan 1857    1857-1861            Democratic   written\n70   70        James Buchanan 1858    1857-1861            Democratic   written\n71   71        James Buchanan 1859    1857-1861            Democratic   written\n72   72        James Buchanan 1860    1857-1861            Democratic   written\n73   73       Abraham Lincoln 1861    1861-1865            Republican   written\n74   74       Abraham Lincoln 1862    1861-1865            Republican   written\n75   75       Abraham Lincoln 1863    1861-1865            Republican   written\n76   76       Abraham Lincoln 1864    1861-1865            Republican   written\n77   77        Andrew Johnson 1865    1865-1869            Republican   written\n78   78        Andrew Johnson 1866    1865-1869            Republican   written\n79   79        Andrew Johnson 1867    1865-1869            Republican   written\n80   80        Andrew Johnson 1868    1865-1869            Republican   written\n81   81      Ulysses S. Grant 1869    1869-1873            Republican   written\n82   82      Ulysses S. Grant 1870    1869-1873            Republican   written\n83   83      Ulysses S. Grant 1871    1869-1873            Republican   written\n84   84      Ulysses S. Grant 1872    1869-1873            Republican   written\n85   85      Ulysses S. Grant 1873    1873-1877            Republican   written\n86   86      Ulysses S. Grant 1874    1873-1877            Republican   written\n87   87      Ulysses S. Grant 1875    1873-1877            Republican   written\n88   88      Ulysses S. Grant 1876    1873-1877            Republican   written\n89   89   Rutherford B. Hayes 1877    1877-1881            Republican   written\n90   90   Rutherford B. Hayes 1878    1877-1881            Republican   written\n91   91   Rutherford B. Hayes 1879    1877-1881            Republican   written\n92   92   Rutherford B. Hayes 1880    1877-1881            Republican   written\n93   93     Chester A. Arthur 1881    1881-1885            Republican   written\n94   94     Chester A. Arthur 1882    1881-1885            Republican   written\n95   95     Chester A. Arthur 1883    1881-1885            Republican   written\n96   96     Chester A. Arthur 1884    1881-1885            Republican   written\n97   97      Grover Cleveland 1885    1885-1889            Democratic   written\n98   98      Grover Cleveland 1886    1885-1889            Democratic   written\n99   99      Grover Cleveland 1887    1885-1889            Democratic   written\n100 100      Grover Cleveland 1888    1885-1889            Democratic   written\n101 101     Benjamin Harrison 1889    1889-1893            Republican   written\n102 102     Benjamin Harrison 1890    1889-1893            Republican   written\n103 103     Benjamin Harrison 1891    1889-1893            Republican   written\n104 104     Benjamin Harrison 1892    1889-1893            Republican   written\n105 105      Grover Cleveland 1893    1893-1897            Democratic   written\n106 106      Grover Cleveland 1894    1893-1897            Democratic   written\n107 107      Grover Cleveland 1895    1893-1897            Democratic   written\n108 108      Grover Cleveland 1896    1893-1897            Democratic   written\n109 109      William McKinley 1897    1897-1901            Republican   written\n110 110      William McKinley 1898    1897-1901            Republican   written\n111 111      William McKinley 1899    1897-1901            Republican   written\n112 112      William McKinley 1900    1897-1901            Republican   written\n113 113    Theodore Roosevelt 1901    1901-1905            Republican   written\n114 114    Theodore Roosevelt 1902    1901-1905            Republican   written\n115 115    Theodore Roosevelt 1903    1901-1905            Republican   written\n116 116    Theodore Roosevelt 1904    1901-1905            Republican   written\n117 117    Theodore Roosevelt 1905    1905-1909            Republican   written\n118 118    Theodore Roosevelt 1906    1905-1909            Republican   written\n119 119    Theodore Roosevelt 1907    1905-1909            Republican   written\n120 120    Theodore Roosevelt 1908    1905-1909            Republican   written\n121 121   William Howard Taft 1909    1909-1913            Republican   written\n122 122   William Howard Taft 1910    1909-1913            Republican   written\n123 123   William Howard Taft 1911    1909-1913            Republican   written\n124 124   William Howard Taft 1912    1909-1913            Republican   written\n125 125        Woodrow Wilson 1913    1913-1917            Democratic    speech\n126 126        Woodrow Wilson 1914    1913-1917            Democratic    speech\n127 127        Woodrow Wilson 1915    1913-1917            Democratic    speech\n128 128        Woodrow Wilson 1916    1913-1917            Democratic    speech\n129 129        Woodrow Wilson 1917    1917-1921            Democratic    speech\n130 130        Woodrow Wilson 1918    1917-1921            Democratic    speech\n131 131        Woodrow Wilson 1919    1917-1921            Democratic   written\n132 132        Woodrow Wilson 1920    1917-1921            Democratic   written\n133 133     Warren G. Harding 1921    1921-1923            Republican    speech\n134 134     Warren G. Harding 1922    1921-1923            Republican    speech\n135 135       Calvin Coolidge 1923    1923-1925            Republican    speech\n136 136       Calvin Coolidge 1924    1923-1925            Republican   written\n137 137       Calvin Coolidge 1925    1925-1929            Republican   written\n138 138       Calvin Coolidge 1926    1925-1929            Republican   written\n139 139       Calvin Coolidge 1927    1925-1929            Republican   written\n140 140       Calvin Coolidge 1928    1925-1929            Republican   written\n141 141        Herbert Hoover 1929    1929-1933            Republican   written\n142 142        Herbert Hoover 1930    1929-1933            Republican   written\n143 143        Herbert Hoover 1931    1929-1933            Republican   written\n144 144        Herbert Hoover 1932    1929-1933            Republican   written\n145 145 Franklin D. Roosevelt 1934    1933-1937            Democratic    speech\n146 146 Franklin D. Roosevelt 1935    1933-1937            Democratic    speech\n147 147 Franklin D. Roosevelt 1936    1933-1937            Democratic    speech\n148 148 Franklin D. Roosevelt 1937    1937-1941            Democratic    speech\n149 149 Franklin D. Roosevelt 1938    1937-1941            Democratic    speech\n150 150 Franklin D. Roosevelt 1939    1937-1941            Democratic    speech\n151 151 Franklin D. Roosevelt 1940    1937-1941            Democratic    speech\n152 152 Franklin D. Roosevelt 1941    1941-1945            Democratic    speech\n153 153 Franklin D. Roosevelt 1942    1941-1945            Democratic    speech\n154 154 Franklin D. Roosevelt 1943    1941-1945            Democratic    speech\n155 155 Franklin D. Roosevelt 1944    1941-1945            Democratic    speech\n156 156 Franklin D. Roosevelt 1945         1945            Democratic    speech\n157 157 Franklin D. Roosevelt 1945         1945            Democratic   written\n158 158        Harry S Truman 1946    1945-1949            Democratic   written\n159 159        Harry S Truman 1947    1945-1949            Democratic    speech\n160 160        Harry S Truman 1948    1945-1949            Democratic    speech\n161 161        Harry S Truman 1949    1949-1953            Democratic    speech\n162 162        Harry S Truman 1950    1949-1953            Democratic    speech\n163 163        Harry S Truman 1951    1949-1953            Democratic    speech\n164 164        Harry S Truman 1952    1949-1953            Democratic    speech\n165 165  Dwight D. Eisenhower 1953    1953-1957            Republican   written\n166 166        Harry S Truman 1953    1949-1953            Democratic   written\n167 167  Dwight D. Eisenhower 1954    1953-1957            Republican    speech\n168 168  Dwight D. Eisenhower 1955    1953-1957            Republican    speech\n169 169  Dwight D. Eisenhower 1956    1953-1957            Republican    speech\n170 170  Dwight D. Eisenhower 1956    1953-1957            Republican   written\n171 171  Dwight D. Eisenhower 1957    1957-1961            Republican    speech\n172 172  Dwight D. Eisenhower 1958    1957-1961            Republican    speech\n173 173  Dwight D. Eisenhower 1959    1957-1961            Republican    speech\n174 174  Dwight D. Eisenhower 1960    1957-1961            Republican    speech\n175 175       John F. Kennedy 1961    1961-1963            Democratic   written\n176 176  Dwight D. Eisenhower 1961    1957-1961            Republican   written\n177 177       John F. Kennedy 1962    1961-1963            Democratic    speech\n178 178       John F. Kennedy 1963    1961-1963            Democratic    speech\n179 179     Lyndon B. Johnson 1964    1964-1965            Democratic    speech\n180 180     Lyndon B. Johnson 1965    1965-1969            Democratic    speech\n181 181     Lyndon B. Johnson 1966    1965-1969            Democratic    speech\n182 182     Lyndon B. Johnson 1967    1965-1969            Democratic    speech\n183 183     Lyndon B. Johnson 1968    1965-1969            Democratic    speech\n184 184     Lyndon B. Johnson 1969    1965-1969            Democratic   written\n185 185      Richard M. Nixon 1970    1969-1973            Republican    speech\n186 186      Richard M. Nixon 1971    1969-1973            Republican    speech\n187 187      Richard M. Nixon 1972    1969-1973            Republican    speech\n188 188      Richard M. Nixon 1972    1969-1973            Republican   written\n189 189      Richard M. Nixon 1974    1973-1974            Republican    speech\n190 190      Richard M. Nixon 1974    1973-1974            Republican   written\n191 191        Gerald R. Ford 1975    1974-1977            Republican    speech\n192 192        Gerald R. Ford 1976    1974-1977            Republican    speech\n193 193        Gerald R. Ford 1977    1974-1977            Republican   written\n194 194          Jimmy Carter 1978    1977-1981            Democratic    speech\n195 195          Jimmy Carter 1978    1977-1981            Democratic   written\n196 196          Jimmy Carter 1979    1977-1981            Democratic    speech\n197 197          Jimmy Carter 1979    1977-1981            Democratic   written\n198 198          Jimmy Carter 1980    1977-1981            Democratic    speech\n199 199          Jimmy Carter 1980    1977-1981            Democratic   written\n200 200         Ronald Reagan 1981    1981-1985            Republican    speech\n201 201          Jimmy Carter 1981    1977-1981            Democratic   written\n202 202         Ronald Reagan 1982    1981-1985            Republican    speech\n203 203         Ronald Reagan 1983    1981-1985            Republican    speech\n204 204         Ronald Reagan 1984    1981-1985            Republican    speech\n205 205         Ronald Reagan 1985    1985-1989            Republican    speech\n206 206         Ronald Reagan 1986    1985-1989            Republican    speech\n207 207         Ronald Reagan 1987    1985-1989            Republican    speech\n208 208         Ronald Reagan 1988    1985-1989            Republican    speech\n209 209           George Bush 1989    1989-1993            Republican    speech\n210 210           George Bush 1990    1989-1993            Republican    speech\n211 211           George Bush 1991    1989-1993            Republican    speech\n212 212           George Bush 1992    1989-1993            Republican    speech\n213 213    William J. Clinton 1993    1993-1997            Democratic    speech\n214 214    William J. Clinton 1994    1993-1997            Democratic    speech\n215 215    William J. Clinton 1995    1993-1997            Democratic    speech\n216 216    William J. Clinton 1996    1993-1997            Democratic    speech\n217 217    William J. Clinton 1997    1997-2001            Democratic    speech\n218 218    William J. Clinton 1998    1997-2001            Democratic    speech\n219 219    William J. Clinton 1999    1997-2001            Democratic    speech\n220 220    William J. Clinton 2000    1997-2001            Democratic    speech\n221 221        George W. Bush 2001    2001-2005            Republican    speech\n222 222        George W. Bush 2002    2001-2005            Republican    speech\n223 223        George W. Bush 2003    2001-2005            Republican    speech\n224 224        George W. Bush 2004    2001-2005            Republican    speech\n225 225        George W. Bush 2005    2005-2009            Republican    speech\n226 226        George W. Bush 2006    2005-2009            Republican    speech\n227 227        George W. Bush 2007    2005-2009            Republican    speech\n228 228        George W. Bush 2008    2005-2009            Republican    speech\n229 229          Barack Obama 2009    2009-2013            Democratic    speech\n230 230          Barack Obama 2010    2009-2013            Democratic    speech\n231 231          Barack Obama 2011    2009-2013            Democratic    speech\n232 232          Barack Obama 2012    2009-2013            Democratic    speech\n233 233          Barack Obama 2013    2013-2016            Democratic    speech\n234 234          Barack Obama 2014    2013-2016            Democratic    speech\n235 235          Barack Obama 2015    2013-2016            Democratic    speech\n236 236          Barack Obama 2016    2013-2016            Democratic    speech\n237 237          Donald Trump 2017    2016-2020            Republican    speech\n238 238          Donald Trump 2018    2016-2020            Republican    speech\n239 239          Donald Trump 2019    2016-2020            Republican    speech\n240 240          Donald Trump 2020    2016-2020            Republican    speech\n\n## turn into Document-Term-Matrix\nsotu.dtm &lt;- DocumentTermMatrix(sotu.corpus)\n\n\n## preview\ninspect(sotu.dtm[,10:20])\n\n&lt;&lt;DocumentTermMatrix (documents: 240, terms: 11)&gt;&gt;\nNon-/sparse entries: 53/2587\nSparsity           : 98%\nMaximal term length: 12\nWeighting          : term frequency (tf)\nSample             :\n     Terms\nDocs  abandonment abandons abate abated abatement abating abbas abbreviation\n  106           2        0     0      0         0       0     0            0\n  108           1        1     0      0         0       0     0            0\n  112           0        0     1      1         1       0     0            0\n  119           2        0     0      0         0       0     0            0\n  147           0        0     0      0         0       0     0            0\n  195           0        0     1      0         2       0     0            0\n  201           2        0     1      0         0       0     0            0\n  53            0        0     0      0         2       0     0            0\n  66            2        0     0      0         0       0     0            0\n  94            1        0     0      0         1       0     0            0\n     Terms\nDocs  abdicated abdicating\n  106         0          0\n  108         0          0\n  112         0          0\n  119         0          1\n  147         2          0\n  195         0          0\n  201         0          0\n  53          0          0\n  66          0          0\n  94          0          0\n\n\n\n\n11.3.3 Word Frequency\nConvert the “Document-Term-Matrix” into a matrix using as.matrix()\n\nsotu.dtm.mat &lt;- as.matrix(sotu.dtm)\n\n## Most frequent words\nhead(sort(sotu.dtm.mat[1,], decreasing=T), n=10)\n\n      will        may     public    country        end government      great \n        14          5          5          4          4          4          4 \n  measures     regard     states \n         4          4          4 \n\nhead(sort(sotu.dtm.mat[236,], decreasing=T), n=10)\n\n america      now   people     will     just american     work    world \n      28       27       27       26       25       22       22       22 \n    make      can \n      20       19 \n\n\nNote: these are somewhat generic words.\nWord Cloud\n\nwordcloud(words=names(sotu.dtm.mat[1,]),\n          freq=sotu.dtm.mat[1,], max.words = 20)"
  },
  {
    "objectID": "11-TextasData.html#word-importance",
    "href": "11-TextasData.html#word-importance",
    "title": "11  Text as Data",
    "section": "11.4 Word Importance",
    "text": "11.4 Word Importance\nWe use tf-idf (term frequency - inverse document frequency) as a way to pull out uniquely important/relevant words for a given character.\n\nRelative frequency of a term inversely weighted by the number of documents in which the term appears.\nFunctionally, if everyone uses the word “know,” then it’s not very important for distinguishing characters/documents from each other.\nWe want words that a speech used frequently, that other speeches use less frequently\n\n\n## words uniquely important to a character\nsotu.tfidf &lt;- weightTfIdf(sotu.dtm)\n\n## convert to matrix\nsotu.tfidf.mat &lt;- as.matrix(sotu.tfidf)\n\nWe can summarize the uniquely relevant words for each speech\n\nGw1790.tfidf &lt;-head(sort(sotu.tfidf.mat[1,], decreasing=T), n=8)\nBO2016.tfidf &lt;-head(sort(sotu.tfidf.mat[236,], decreasing=T), n=8)\n\n\nGw1790.tfidf\n\n    intimating licentiousness        discern     inviolable         derive \n    0.01532343     0.01532343     0.01338545     0.01225180     0.01181748 \n     persuaded     cherishing  comprehending \n    0.01181748     0.01082357     0.01082357 \n\n\n\nbarplot(Gw1790.tfidf, cex.axis=.7,\n         cex.names=.7,\n        main= \"Most `Important' 1790 SOTU Words (tf-idf)\", \n        horiz = T, las=2)\n\n\n\nbarplot(BO2016.tfidf,\n         cex.names=.7, cex.axis=.7,\n        main= \"Most `Important' 2016 SOTU Words (tf-idf)\", \n        horiz=T, las=2)"
  },
  {
    "objectID": "11-TextasData.html#additional-descriptive-statistics",
    "href": "11-TextasData.html#additional-descriptive-statistics",
    "title": "11  Text as Data",
    "section": "11.5 Additional Descriptive Statistics",
    "text": "11.5 Additional Descriptive Statistics\nAre the length of speeches changing? The nchar() function tells you the number of characters in a “string.”\n\nspeeches$speechlength &lt;- nchar(speeches$sotu_text)\n\nLet’s plot the length of speeches over time and annotate with informative colors and labels.\nIs the length of speeches changing?\n\nplot(x=1:length(speeches$speechlength), y= speeches$speechlength, \n    pch=15,\n     xaxt=\"n\",\n     xlab=\"\", \n     ylab = \"Number of Characters\")\n\n## add x axis\naxis(1, 1:length(speeches$speechlength), labels=speeches$year, las=3, cex.axis=.7)\n\n\n\n\nWe can add color to distinguish written vs. spoken speeches\n\nspeechcolor &lt;- ifelse(speeches$sotu_type == \"written\", \"black\", \"green3\")\nplot(x=1:length(speeches$speechlength), y= speeches$speechlength, \n     xaxt=\"n\", pch=15,\n     xlab=\"\", \n     ylab = \"Number of Characters\",\n     col = speechcolor)\n\n## add x axis\naxis(1, 1:length(speeches$speechlength), labels=speeches$year, las=3, cex.axis=.7)\n\n## add legend\nlegend(\"topleft\", c(\"spoken\", \"written\"), \n       pch=15, \n       col=c(\"green3\", \"black\"), bty=\"n\")\n\n\n\n\n\n11.5.1 Dictionary Analysis\nWe can characterize the content of speeches in different ways. For example, we can see if speeches mention specific words, such as `“terrorism.”\n\nThe function grepl() lets you search for a pattern of text in a character string\nThe function str_detect() works similarly with the opposite order of inputs\n\n\nspeeches$terrorism &lt;- ifelse(grepl(\"terror\", speeches$sotu_text), 1,0)\nspeeches$terrorism2 &lt;- ifelse(str_detect(speeches$sotu_text,\"terror\"), 1,0)\n\n\nsort(tapply(speeches$terrorism, speeches$president, sum), \n     decreasing=T)[1:10]\n\n       George W. Bush    William J. Clinton          Barack Obama \n                    8                     8                     7 \n        Ronald Reagan          Donald Trump Franklin D. Roosevelt \n                    6                     4                     4 \n       Andrew Jackson     Chester A. Arthur      Grover Cleveland \n                    2                     2                     2 \n       Harry S Truman \n                    2 \n\n\nWe can characterize the content of speeches in different ways. For example, we can see if speeches mention specific words, such as “terrorism.”\n\nThe function str_count() counts the number of times a piece of text appears in a character string\n\n\nspeeches$terrorismcount &lt;- str_count(speeches$sotu_text, \"terror\")\n\n\nsort(tapply(speeches$terrorismcount, speeches$president, sum), \n     decreasing=T)[1:10]\n\n       George W. Bush          Barack Obama    William J. Clinton \n                  171                    37                    29 \n         Donald Trump         Ronald Reagan Franklin D. Roosevelt \n                   24                    10                     6 \n    Lyndon B. Johnson        Harry S Truman          Jimmy Carter \n                    5                     3                     3 \n       Andrew Jackson \n                    2 \n\n\nWe can add multiple words with the | operator. This is often called a “dictionary analysis.”\n\nspeeches$warcount &lt;- str_count(speeches$sotu_text, \n                               \"terror|war|military|drone\")\nsort(tapply(speeches$warcount, speeches$president, sum), decreasing=T)[1:10]\n\n       Harry S Truman    Theodore Roosevelt Franklin D. Roosevelt \n                  554                   481                   441 \n        James K. Polk          Jimmy Carter  Dwight D. Eisenhower \n                  390                   348                   332 \n     William McKinley        George W. Bush      Grover Cleveland \n                  324                   323                   257 \n     Ulysses S. Grant \n                  233 \n\n\nWhat are possible limitations of this analysis?"
  },
  {
    "objectID": "11-TextasData.html#application-programming-interfaces",
    "href": "11-TextasData.html#application-programming-interfaces",
    "title": "11  Text as Data",
    "section": "11.6 Application Programming Interfaces",
    "text": "11.6 Application Programming Interfaces\nApplication programming interfaces (APIs) are tools that allow you to search a large database to extract specific types of information. Social scientists often work with APIs to extract data from social media platforms, government agencies (e.g., U.S. Census), and news sites, among others.\nOrganizations that develop these APIs can control what types of information researchers can access. Often, they set limits on the types and quantities of information someone can collect. Companies also often monitor who accesses the information by requiring people to sign up for access, apply for access, and/or pay for access.\nExample: Census API As an example of an API, the U.S. Census has an API that allows researchers to extract nicely formatted data summaries of different geographic units (e.g., all zip codes in the U.S.).\n\nResearchers can sign up here for an API “key” which allows the organization to monitor who is accessing what information.\n\nResearchers Kyle Walker and Matt Herman have made an R package that makes working with the API easier.\n\nExample: tidycensus found here allows you to search Census data by providing the variables you want to extract\n\n\nAPIs can make a social scientist’s life easier by providing an efficient way to collect data. Without an API, researchers might have to resort to manually extracting information from online or writing an ad hoc set of code to “scrape” the information off of websites. This can be time consuming, against an organization or company’s policy, or even impossible in some cases. APIs are powerful and efficient.\nHowever, because researchers cannot control the API, the downside is at any given time, an organization could change or remove API access. Researchers might also not have the full details of what information is included in the API, potentially leading to biased conclusions from the data. APIs are great, but we should use them with caution."
  },
  {
    "objectID": "11-TextasData.html#the-politics-of-song-choice",
    "href": "11-TextasData.html#the-politics-of-song-choice",
    "title": "11  Text as Data",
    "section": "11.7 The Politics of Song Choice",
    "text": "11.7 The Politics of Song Choice\nWhen deciding to run for office, political candidates often think strategically about how to introduce themselves. In the lead up to the 2024 presidential election in the United States, several Republicans announced their candidacy for the primary nomination.\nAs this article in The Hill notes, oftentimes, the candidate celebrates their announcement with a theme song / walkout music / or common song they bring with them on the campaign trail. Politico went even further to ask candidates to submit their top 20 songs. Only some candidates responded, and in this application, we will analyze the playlists of some of the top candidates who submitted their song choices: Chris Christie, Nikki Haley, and Vivek Ramaswamy.\nWe will analyze some of these songs drawing on the Spotify API.\n\n11.7.1 Setting Up the Spotify API\nIn order to follow along completely with the Spotify portion, you will need 1) a free account on Spotify https://open.spotify.com/, 2) a developer’s app on Spotify, and the 3) spotifyR package installed in RStudio.\nAfter signing up for a free Spotify account, let’s create the developer’s app by\n\ngoing to https://developer.spotify.com/dashboard when you are signed in.\nSelect “Create app”\n\nGive your app a name (can be anything) and description (e.g., For conducting political analysis)\nSet a redirect URI– this won’t matter much for our purposes, so you can use http://localhost:1410/.\nYou can leave “website” blank\nMark the check box for Web API\n\n\n\nAfter “saving” the information, click on the “Settings” for the app, where you can view your Client ID and a button called, “View client secret.” We will use these in a moment. Note: do not share these with anyone. Treat these like passwords.\nTo R we go! We will access the Spotify API through an R package spotifyr. The first time you use this package, you will need to install it.\n\ninstall.packages('spotifyr', dependencies = TRUE)\n\nEvery other time, you will need to use the following code:\n\nlibrary(spotifyr)\n\nNow, we need to “authenticate” our connection with Spotify using our Client ID and Client Secret credentials. Replace the xxxxxxx’s below with your own credentials and generate the access_token which will be stored in your RStudio environment.\n\nSys.setenv(SPOTIFY_CLIENT_ID ='xxxxxxxxx')\nSys.setenv(SPOTIFY_CLIENT_SECRET = 'xxxxxxxxxx')\nauth_object &lt;- get_spotify_authorization_code(scope = scopes()[c(7,8,9,10,14,15)])\n\nTroubleshooting\n\nSometimes people get an error about not having “httpuv” installed. If that happens to you, you can also run install.packages(\"httpuv\") and then retry using library(spotifyr) and running the setup code.\nIf you get an error that says “cannot find function”, it may mean that spotifyr has not been installed or you have not yet run library(spotifyr). Make sure to run these before using the functions below.\nIf the Sys.setenv functions run properly, the first time you use them, they will likely open up a web browser page related to Spotify, asking you to agree to the terms of the API. Once you agree, it will say “Authentication complete.” If it does not run properly, it may open a web browser page that says “Invalid login” or something like that.To diagnose that error, I recommend doublechecking that you are\n\nSigned into Spotify and the developer’s Spotify page on the web browser opened via the RStudio session\nThat in the Settings page of your Spotify, you have entered the right redirect URI\nThat in RStudio, you have entered the correct ClientID and Client Secret without any typos (no extra spaces or accidental “x” left over from when you pasted it)\nAfter checking these, you can also restart your R session and try again to get a fresh chance of authenticating the API.\n\n\nNow we can use the API! The first time you try to run a function using the API, you might see a message asking you to “cache” your credentials.\nSelect 1 by writing 1 where the cursor is in your bottom-left RStudio Console window and hit enter/return .\n\n\n\n11.7.2 Candidate Danceability and Valence\nWe will retrieve the playlists from the candidates by providing the function get_playlist_audio_features() with the Spotify identifiers for each playlist. We store it in a dataframe object called candidates.\n\ncandidates &lt;- get_playlist_audio_features(username=\"Politico\",\n                            playlist_uris = c(\"26rVnB3MN03kRyXXWwAne0\", \"6gk4Omuze4zSr1G2nK1nQ4\",\"2kGJsgdiexWTVlWnTdGSIi\"))\n\nNote: How do you find the URI if you wanted to on your own? This can be a little tricky. When you are on the web version of Spotify, if you click on the “…” next to the playlist name, artist name, or track name, it provides a menu which includes the “Share” button. By default, the share feature allows you to copy the link to the playlist, a URL. However, this is different from the URI. To get the URI, you can “right-click” on that share button or hold down “control” on a Mac. This will shift it from being the “copy link” to the URI option. See images below to see how holding down “control” after having the menu open shifts the share feature:\n \nLet’s compare the candidates on a few metrics, including danceability (how suitable a track is to dancing from 0 to 1) and valence (musical positiveness from 0 to 1- whether a song is likely to make someone feel happy/cheerful, higher valence, or sad/depressed/angry, lower valence) using a boxplot.\n\nboxplot(danceability~playlist_name, data=candidates, horizontal=TRUE, las=1, \n        names = c(\"Christie\", \"Haley\",\n                                                                                \"Ramaswamy\"), \n        xlab=\"Danceability\", ylab=\"\",\n        cex.axis=.6)\n\n\n\n\nWe can also compare the “valence” of songs by candidate.\n\nboxplot(valence~playlist_name, data=candidates, horizontal=TRUE, las=1, \n        names = c(\"Christie\", \"Haley\",\n                                                                                \"Ramaswamy\"), \n        xlab=\"Valence\", ylab=\"\",\n        cex.axis=.6)\n\n\n\n\nWow, there is one song from Ramaswamy that has particularly low valence. Which song was this, and was it something the candidate emphasized? Yes! His Eminem moment.\n\nvivek &lt;- subset(candidates, playlist_name = \"Vivek Ramaswamy's Top 8 Songs\")\n\nvivek$track.name[vivek$valence == min(vivek$valence)]\n\n[1] \"Lose Yourself\"\n\n\n\n\n\n11.7.3 Additional Tools\nIn addition to analyzing whole playlists, you can also retrieve and analyze specific artists or tracks. Here are a couple examples:\n\n## supply a track URI\nhowdoibreathe_features &lt;- get_track_audio_features(id=\"174rZBKJAqD10VBnOjlQQ3\")\n\n## supply an artist name\nariana &lt;- get_artist_audio_features('ariana grande')\n\n\n\n11.7.4 Saving R Objects\nAfter you extract data from online, you may want to save them as a hard data file on your computer. This way if you close RStudio, you can reproduce the data.\nR allows you to save any R object as an .RData file that can be opened with the load() command. This is discussed on pg. 24 of QSS Chapter 1.\nWe can demonstrate this now by saving candidates as an RData object. It will automatically save to your working directory, but you can also add a subfolder or alternative file path.\n\nsave(candidates, file = \"candidates.RData\")\n\nThen, you can load the file (if you happen to close R/RStudio, restart your computer, etc.) with the load command.\n\nload(\"candidates.RData\")"
  }
]